{% extends 'base.twig' %}

{% block title %}Rey Complex Figure task{% endblock %}
{% block css %}
    <style type="text/css">
        img.img-responsive {
            margin: 0 auto;
        }
        .step h3.popover-title {
            margin-bottom: 0;
        }
    </style>
{% endblock %}
{% block content %}
    <!--
    <div class="container">
        <div class="row">
            <div class="col-md-12 main-title">
                <h1>{{ RCFT }}</h1>
            </div>
        </div>
    </div>
    -->
    <section class="container" id="main">
        <!-- Start Survey container -->
        <div id="survey_container">
            <!--
            <div id="top-wizard">
                <strong>Progress <span id="location"></span></strong>
                <div id="progressbar"></div>
                <div class="shadow"></div>
            </div>
            end top-wizard -->

            <form name="reyComplexFigure1" id="wrapped" action="" method="POST">
                <!-- RCFT1 -->
                <div id="middle-wizard">

                    <div class="step row">
                        <div class="col-md-12" style="text-align: center">
                            <h4>
                                {{ RCFTInsructions4 | raw }}
                            </h4>
                        </div>
                    </div>

                    <!-- Part 4 questions -->
                    <!-- Part 4- 1 -->
                    <div class="step">
                        <div class="row">
                            <div class="col-xs-12">
                                <img src="/assets/img/RCFT/RCFT1.png" class="img-responsive"/>
                                <br><br>
                                <ul class="data-list-2">
                                    <li ><input name="RCFT4-1" type="radio" class="check_radio" value="Yes" required><label>Yes </label></li>
                                    <li ><input name="RCFT4-1" type="radio" class="check_radio" value="No" required><label>No </label></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Part 4- 2 -->
                    <div class="step">
                        <div class="row">
                            <div class="col-xs-12">
                                <img src="/assets/img/RCFT/RCFT2.png" class="img-responsive"/>
                                <br><br>
                                <ul class="data-list-2">
                                    <li ><input name="RCFT4-2" type="radio" class="check_radio" value="Yes" required><label>Yes </label></li>
                                    <li ><input name="RCFT4-2" type="radio" class="check_radio" value="No" required><label>No </label></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Part 4- 3 -->
                    <div class="step">
                        <div class="row">
                            <div class="col-xs-12">
                                <img src="/assets/img/RCFT/RCFT3.png" class="img-responsive"/>
                                <br><br>
                                <ul class="data-list-2">
                                    <li ><input name="RCFT4-3" type="radio" class="check_radio" value="Yes" required><label>Yes </label></li>
                                    <li ><input name="RCFT4-3" type="radio" class="check_radio" value="No" required><label>No </label></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Part 4- 4 -->
                    <div class="step">
                        <div class="row">
                            <div class="col-xs-12">
                                <img src="/assets/img/RCFT/RCFT4.png" class="img-responsive"/>
                                <br><br>
                                <ul class="data-list-2">
                                    <li ><input name="RCFT4-4" type="radio" class="check_radio" value="Yes" required><label>Yes </label></li>
                                    <li ><input name="RCFT4-4" type="radio" class="check_radio" value="No" required><label>No </label></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Part 4- 5 -->
                    <div class="step">
                        <div class="row">
                            <div class="col-xs-12">
                                <img src="/assets/img/RCFT/RCFT5.png" class="img-responsive"/>
                                <br><br>
                                <ul class="data-list-2">
                                    <li ><input name="RCFT4-5" type="radio" class="check_radio" value="Yes" required><label>Yes </label></li>
                                    <li ><input name="RCFT4-5" type="radio" class="check_radio" value="No" required><label>No </label></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Part 4- 6 -->
                    <div class="step">
                        <div class="row">
                            <div class="col-xs-12">
                                <img src="/assets/img/RCFT/RCFT6.png" class="img-responsive"/>
                                <br><br>
                                <ul class="data-list-2">
                                    <li ><input name="RCFT4-6" type="radio" class="check_radio" value="Yes" required><label>Yes </label></li>
                                    <li ><input name="RCFT4-6" type="radio" class="check_radio" value="No" required><label>No </label></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Part 4- 7 -->
                    <div class="step">
                        <div class="row">
                            <div class="col-xs-12">
                                <img src="/assets/img/RCFT/RCFT7.png" class="img-responsive"/>
                                <br><br>
                                <ul class="data-list-2">
                                    <li ><input name="RCFT4-7" type="radio" class="check_radio" value="Yes" required><label>Yes </label></li>
                                    <li ><input name="RCFT4-7" type="radio" class="check_radio" value="No" required><label>No </label></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Part 4- 8 -->
                    <div class="step">
                        <div class="row">
                            <div class="col-xs-12">
                                <img src="/assets/img/RCFT/RCFT8.png" class="img-responsive"/>
                                <br><br>
                                <ul class="data-list-2">
                                    <li ><input name="RCFT4-8" type="radio" class="check_radio" value="Yes" required><label>Yes </label></li>
                                    <li ><input name="RCFT4-8" type="radio" class="check_radio" value="No" required><label>No </label></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Part 4- 9 -->
                    <div class="step">
                        <div class="row">
                            <div class="col-xs-12">
                                <img src="/assets/img/RCFT/RCFT9.png" class="img-responsive"/>
                                <br><br>
                                <ul class="data-list-2">
                                    <li ><input name="RCFT4-9" type="radio" class="check_radio" value="Yes" required><label>Yes </label></li>
                                    <li ><input name="RCFT4-9" type="radio" class="check_radio" value="No" required><label>No </label></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Part 4- 10 -->
                    <div class="step">
                        <div class="row">
                            <div class="col-xs-12">
                                <img src="/assets/img/RCFT/RCFT10.png" class="img-responsive"/>
                                <br><br>
                                <ul class="data-list-2">
                                    <li ><input name="RCFT4-10" type="radio" class="check_radio" value="Yes" required><label>Yes </label></li>
                                    <li ><input name="RCFT4-10" type="radio" class="check_radio" value="No" required><label>No </label></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Part 4- 11 -->
                    <div class="step">
                        <div class="row">
                            <div class="col-xs-12">
                                <img src="/assets/img/RCFT/RCFT11.png" class="img-responsive"/>
                                <br><br>
                                <ul class="data-list-2">
                                    <li ><input name="RCFT4-11" type="radio" class="check_radio" value="Yes" required><label>Yes </label></li>
                                    <li ><input name="RCFT4-11" type="radio" class="check_radio" value="No" required><label>No </label></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Part 4- 12 -->
                    <div class="step">
                        <div class="row">
                            <div class="col-xs-12">
                                <img src="/assets/img/RCFT/RCFT12.png" class="img-responsive"/>
                                <br><br>
                                <ul class="data-list-2">
                                    <li ><input name="RCFT4-12" type="radio" class="check_radio" value="Yes" required><label>Yes </label></li>
                                    <li ><input name="RCFT4-12" type="radio" class="check_radio" value="No" required><label>No </label></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Part 4- 13 -->
                    <div class="step">
                        <div class="row">
                            <div class="col-xs-12">
                                <img src="/assets/img/RCFT/RCFT13.png" class="img-responsive"/>
                                <br><br>
                                <ul class="data-list-2">
                                    <li ><input name="RCFT4-13" type="radio" class="check_radio" value="Yes" required><label>Yes </label></li>
                                    <li ><input name="RCFT4-13" type="radio" class="check_radio" value="No" required><label>No </label></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Part 4- 14 -->
                    <div class="step">
                        <div class="row">
                            <div class="col-xs-12">
                                <img src="/assets/img/RCFT/RCFT14.png"  height="600" />
                                <br><br>
                                <ul class="data-list-2">
                                    <li ><input name="RCFT4-14" type="radio" class="check_radio" value="Yes" required><label>Yes </label></li>
                                    <li ><input name="RCFT4-14" type="radio" class="check_radio" value="No" required><label>No </label></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Part 4- 15 -->
                    <div class="step">
                        <div class="row">
                            <div class="col-xs-12">
                                <img src="/assets/img/RCFT/RCFT15.png"  height="600" />
                                <br><br>
                                <ul class="data-list-2">
                                    <li ><input name="RCFT4-15" type="radio" class="check_radio" value="Yes" required><label>Yes </label></li>
                                    <li ><input name="RCFT4-15" type="radio" class="check_radio" value="No" required><label>No </label></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Part 4- 16 -->
                    <div class="step">
                        <div class="row">
                            <div class="col-xs-12">
                                <img src="/assets/img/RCFT/RCFT16.png"  height="600"/>
                                <br><br>
                                <ul class="data-list-2">
                                    <li ><input name="RCFT4-16" type="radio" class="check_radio" value="Yes" required><label>Yes </label></li>
                                    <li ><input name="RCFT4-16" type="radio" class="check_radio" value="No" required><label>No </label></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Part 4- 17 -->
                    <div class="step">
                        <div class="row">
                            <div class="col-xs-12">
                                <img src="/assets/img/RCFT/RCFT17.png" class="img-responsive"/>
                                <br><br>
                                <ul class="data-list-2">
                                    <li ><input name="RCFT4-17" type="radio" class="check_radio" value="Yes" required><label>Yes </label></li>
                                    <li ><input name="RCFT4-17" type="radio" class="check_radio" value="No" required><label>No </label></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Part 4- 18 -->
                    <div class="step">
                        <div class="row">
                            <div class="col-xs-12">
                                <img src="/assets/img/RCFT/RCFT18.png" class="img-responsive"/>
                                <br><br>
                                <ul class="data-list-2">
                                    <li ><input name="RCFT4-18" type="radio" class="check_radio" value="Yes" required><label>Yes </label></li>
                                    <li ><input name="RCFT4-18" type="radio" class="check_radio" value="No" required><label>No </label></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Part 4- 19 -->
                    <div class="step">
                        <div class="row">
                            <div class="col-xs-12">
                                <img src="/assets/img/RCFT/RCFT19.png" class="img-responsive"/>
                                <br><br>
                                <ul class="data-list-2">
                                    <li ><input name="RCFT4-19" type="radio" class="check_radio" value="Yes" required><label>Yes </label></li>
                                    <li ><input name="RCFT4-19" type="radio" class="check_radio" value="No" required><label>No </label></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Part 4- 20 -->
                    <div class="step">
                        <div class="row">
                            <div class="col-xs-12">
                                <img src="/assets/img/RCFT/RCFT20.png" class="img-responsive"/>
                                <br><br>
                                <ul class="data-list-2">
                                    <li ><input name="RCFT4-20" type="radio" class="check_radio" value="Yes" required><label>Yes </label></li>
                                    <li ><input name="RCFT4-20" type="radio" class="check_radio" value="No" required><label>No </label></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Part 4- 21 -->
                    <div class="step">
                        <div class="row">
                            <div class="col-xs-12">
                                <img src="/assets/img/RCFT/RCFT21.png" class="img-responsive"/>
                                <br><br>
                                <ul class="data-list-2">
                                    <li ><input name="RCFT4-21" type="radio" class="check_radio" value="Yes" required><label>Yes </label></li>
                                    <li ><input name="RCFT4-21" type="radio" class="check_radio" value="No" required><label>No </label></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Part 4- 22 -->
                    <div class="step">
                        <div class="row">
                            <div class="col-xs-12">
                                <img src="/assets/img/RCFT/RCFT22.png" class="img-responsive"/>
                                <br><br>
                                <ul class="data-list-2">
                                    <li ><input name="RCFT4-22" type="radio" class="check_radio" value="Yes" required><label>Yes </label></li>
                                    <li ><input name="RCFT4-22" type="radio" class="check_radio" value="No" required><label>No </label></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Part 4- 23 -->
                    <div class="step">
                        <div class="row">
                            <div class="col-xs-12">
                                <img src="/assets/img/RCFT/RCFT23.png" class="img-responsive"/>
                                <br><br>
                                <ul class="data-list-2">
                                    <li ><input name="RCFT4-23" type="radio" class="check_radio" value="Yes" required><label>Yes </label></li>
                                    <li ><input name="RCFT4-23" type="radio" class="check_radio" value="No" required><label>No </label></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Part 4- 24 -->
                    <div class="step">
                        <div class="row">
                            <div class="col-xs-12">
                                <img src="/assets/img/RCFT/RCFT24.png" class="img-responsive"/>
                                <br><br>
                                <ul class="data-list-2">
                                    <li ><input name="RCFT4-24" type="radio" class="check_radio" value="Yes" required><label>Yes </label></li>
                                    <li ><input name="RCFT4-24" type="radio" class="check_radio" value="No" required><label>No </label></li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="submit step" id="complete">
                        <i class="icon-check"></i>
                        <h3>Test complete!</h3>
                        <button type="submit" name="process" class="submit">Submit</button>
                    </div><!-- end submit step -->
                </div>

                <div id="bottom-wizard">
                    <button id="backwardButton" type="button" name="backward" class="backward">Backward</button>
                    <button id="forwardButton" type="button" name="forward" class="forward">Forward</button>
                </div><!-- end bottom-wizard -->
            </form>
        </div><!-- end Survey container -->
    </section>
{% endblock %}
{% block extra %}{% endblock %}
{% block script %}
    <script type="text/javascript" src="/assets/js/jcanvas.min.js"></script>
    <script type="text/javascript" src="/assets/js/jTimer.js"></script>
    <script>
        $(document).ready(function () {
            var $canvas1 = $("#RCFT1");
            var pts1 = [];
            var lines1 = [];
            var line_obj1 = {};
            var isDown1 = false;
            var $canvas2 = $("#RCFT2");
            var pts2 = [];
            var lines2 = [];
            var line_obj2 = {};
            var isDown2 = false;
            var $canvas3 = $("#RCFT3");
            var pts3 = [];
            var lines3 = [];
            var line_obj3 = {};
            var isDown3 = false;
            var $canvas4 = $("#RCFT3");
            var pts4 = [];
            var lines4 = [];
            var line_obj4 = {};
            var isDown4 = false;
            var $canvasPractice = $("#RCFTPractice");
            var ptsPractice = [];
            var linesPractice = [];
            var line_objPractice = {};
            var isDownPractice = false;

            //Setup Drawing Surfaces for test
            $canvas1.drawRect({
                layer: true,
                x: 0, y: 0,
                width: 800, height: 500,
                fromCenter: false,
                mousedown: function (layer) {
                    line_obj1 = {
                        strokeStyle: "#000",
                        strokeWidth: 2,
                        data: {
                            joints: 1
                        }
                    };

                    isDown1 = true;
                    pts1.push([layer.eventX, layer.eventY]);
                    for (var i = 0; i < lines1.length; i++) {
                        $(this).drawLine(lines1[i]);
                    }
                },
                mousemove: function (layer) {
                    if (isDown1) {
                        pts1.push([layer.eventX, layer.eventY]);
                        for (var p = 0; p < pts1.length; p += 1) {
                            line_obj1['x' + (p + 1)] = pts1[p][0];
                            line_obj1['y' + (p + 1)] = pts1[p][1];
                        }
                        $(this).drawLine(line_obj1);
                    }
                    for (var i = 0; i < lines1.length; i++) {
                        $(this).drawLine(lines1[i]);
                    }
                },
                mouseup: function (layer) {
                    lines1.push(line_obj1);

                    for (var i = 0; i < lines1.length; i++) {
                        $(this).drawLine(lines1[i]);
                    }

                    line_obj1 = {};
                    pts1 = [];
                    isDown1 = false;
//                },
//                mouseout: function (layer) {
//                    console.log(lines1);
//
//                    for (var i = 0; i < lines1.length; i++) {
//                        $canvas2.drawLine(lines1[i]);
//                    }
                }
            });
            $canvas2.drawRect({
                layer: true,
                x: 0, y: 0,
                width: 800, height: 500,
                fromCenter: false,
                mousedown: function (layer) {
                    line_obj2 = {
                        strokeStyle: "#000",
                        strokeWidth: 2,
                        data: {
                            joints: 1
                        }
                    };

                    isDown2 = true;
                    pts2.push([layer.eventX, layer.eventY]);
                },
                mousemove: function (layer) {
                    if (isDown2) {
                        pts2.push([layer.eventX, layer.eventY]);
                        for (var p = 0; p < pts2.length; p += 1) {
                            line_obj2['x' + (p + 1)] = pts2[p][0];
                            line_obj2['y' + (p + 1)] = pts2[p][1];
                        }
                        $canvas2.drawLine(line_obj2);
                    }
                    for (var i = 0; i < lines2.length; i++) {
                        $canvas2.drawLine(lines2[i]);
                    }
                },
                mouseup: function (layer) {
                    lines2.push(line_obj2);

                    for (var i = 0; i < lines2.length; i++) {
                        $canvas2.drawLine(lines2[i]);
                    }

                    line_obj2 = {};
                    pts2 = [];
                    isDown2 = false;
                },
                mouseout: function (layer) {
                    console.log(lines2);

                    for (var i = 0; i < lines2.length; i++) {
                        $canvas2.drawLine(lines2[i]);
                    }
                }
            });
            $canvas3.drawRect({
                layer: true,
                x: 0, y: 0,
                width: 800, height: 500,
                fromCenter: false,
                mousedown: function (layer) {
                    line_obj3 = {
                        strokeStyle: "#000",
                        strokeWidth: 2,
                        data: {
                            joints: 1
                        }
                    };

                    isDown3 = true;
                    pts3.push([layer.eventX, layer.eventY]);
                },
                mousemove: function (layer) {
                    if (isDown3) {
                        pts3.push([layer.eventX, layer.eventY]);
                        for (var p = 0; p < pts3.length; p += 1) {
                            line_obj3['x' + (p + 1)] = pts3[p][0];
                            line_obj3['y' + (p + 1)] = pts3[p][1];
                        }
                        $canvas3.drawLine(line_obj3);
                    }
                    for (var i = 0; i < lines3.length; i++) {
                        $canvas3.drawLine(lines3[i]);
                    }
                },
                mouseup: function (layer) {
                    lines3.push(line_obj3);

                    for (var i = 0; i < lines3.length; i++) {
                        $canvas3.drawLine(lines3[i]);
                    }

                    line_obj3 = {};
                    pts3 = [];
                    isDown3 = false;
                },
                mouseout: function (layer) {
                    console.log(lines3);

                    for (var i = 0; i < lines3.length; i++) {
                        $canvas3.drawLine(lines3[i]);
                    }
                }
            });
            $canvas4.drawRect({
                layer: true,
                x: 0, y: 0,
                width: 800, height: 500,
                fromCenter: false,
                mousedown: function (layer) {
                    line_obj4 = {
                        strokeStyle: "#000",
                        strokeWidth: 2,
                        data: {
                            joints: 1
                        }
                    };

                    isDown4 = true;
                    pts4.push([layer.eventX, layer.eventY]);
                },
                mousemove: function (layer) {
                    if (isDown4) {
                        pts4.push([layer.eventX, layer.eventY]);
                        for (var p = 0; p < pts4.length; p += 1) {
                            line_obj4['x' + (p + 1)] = pts4[p][0];
                            line_obj4['y' + (p + 1)] = pts4[p][1];
                        }
                        $canvas4.drawLine(line_obj4);
                    }
                    for (var i = 0; i < lines4.length; i++) {
                        $canvas4.drawLine(lines4[i]);
                    }
                },
                mouseup: function (layer) {
                    lines4.push(line_obj4);

                    for (var i = 0; i < lines4.length; i++) {
                        $canvas4.drawLine(lines4[i]);
                    }

                    line_obj4 = {};
                    pts4 = [];
                    isDown4 = false;
                },
                mouseout: function (layer) {
                    console.log(lines4);

                    for (var i = 0; i < lines4.length; i++) {
                        $canvas4.drawLine(lines4[i]);
                    }
                }
            });
            $canvasPractice.drawRect({
                layer: true,
                x: 0, y: 0,
                width: 800, height: 500,
                fromCenter: false,
                mousedown: function (layer) {
                    line_objPractice = {
                        strokeStyle: "#000",
                        strokeWidth: 2,
                        data: {
                            joints: 1
                        }
                    };

                    isDownPractice = true;
                    ptsPractice.push([layer.eventX, layer.eventY]);
                },
                mousemove: function (layer) {
                    if (isDownPractice) {
                        ptsPractice.push([layer.eventX, layer.eventY]);
                        for (var p = 0; p < ptsPractice.length; p += 1) {
                            line_objPractice['x' + (p + 1)] = ptsPractice[p][0];
                            line_objPractice['y' + (p + 1)] = ptsPractice[p][1];
                        }
                        $canvasPractice.drawLine(line_objPractice);
                    }
                    for (var i = 0; i < linesPractice.length; i++) {
                        $canvasPractice.drawLine(linesPractice[i]);
                    }
                },
                mouseup: function (layer) {
                    linesPractice.push(line_objPractice);

                    for (var i = 0; i < linesPractice.length; i++) {
                        $canvasPractice.drawLine(linesPractice[i]);
                    }

                    line_objPractice = {};
                    ptsPractice = [];
                    isDownPractice = false;
                },
                mouseout: function (layer) {
                    console.log(linesPractice);

                    for (var i = 0; i < linesPractice.length; i++) {
                        $canvasPractice.drawLine(linesPractice[i]);
                    }
                }
            });


            //Save Part one
            var $save1 = $('#part1Submit');
            var $save2 = $('#part2Submit');
            var $save3 = $('#part2Submit');
            //After user clicks saves, save whatever is on the canvas
            $save1.click(function () {
                var c = document.getElementById("RCFT1");
                var dataURL = c.toDataURL("image/png");

                $.ajax({
                    type: "POST",
                    url: "saveImage.php",
                    data: {
                        imgBase64: dataURL
                    }
                }).done(function (o) {
                    console.log('saved');
                    document.getElementById("ForwardButton").click();
                });

            });
            $save2.click(function () {
                var c = document.getElementById("RCFT2");
                var dataURL = c.toDataURL("image/png");

                $.ajax({
                    type: "POST",
                    url: "saveImage.php",
                    data: {
                        imgBase64: dataURL
                    }
                }).done(function (o) {
                    console.log('saved');
                });
            });
            $save3.click(function () {
                var c = document.getElementById("RCFT3");
                var dataURL = c.toDataURL("image/png");

                $.ajax({
                    type: "POST",
                    url: "saveImage.php",
                    data: {
                        imgBase64: dataURL
                    }
                }).done(function (o) {
                    console.log('saved');
                    document.getElementById("ForwardButton").click();
                });
            });
        });




        //After the user is done practicing, clear the canvas and move to the next screen.
        function practiceSubmit() {
            $('canvas').removeLayers($('canvas').getLayers()).drawLayers();
            $('#backwardButton').prop('disabled', true);
            $('#forwardButton').trigger('click');

        }




    </script>
{% endblock %}
